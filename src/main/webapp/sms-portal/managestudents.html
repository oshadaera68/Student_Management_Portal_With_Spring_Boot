<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Students</title>
    <link href="assets/css/styles.css" rel="stylesheet">
    <link href="assets/css/managestudents.css" rel="stylesheet">
    <link href="assets/boostrap/css/bootstrap.min.css" rel="stylesheet">
    <meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>

<section class="position-absolute vw-100 vh-100 d-flex flex-column">
    <nav class="navbar navbar-expand-lg navbar bg-dark shadow-lg posNavi position-relative">
        <div class="container-fluid">
            <a class="navbar-brand active text-light" href="#">
                SMS Portal
            </a>
            <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
                    class="navbar-toggler"
                    data-bs-target="#navbarSupportedContent" data-bs-toggle="collapse" type="button">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 naviItems">
                    <li class="nav-item">
                        <a class="nav-link active text-light" href="addstudent.html">Create New student</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active text-light" href="addclass.html">Create New class</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active text-light" href="managestudents.html">Manage Students</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div>
        <h2 class="main4">Manage Students</h2>
    </div>

    <div class="manageStuDiv">
        <table class="table bg-light table-bordered w-100 h-100 table-hover">
            <thead class="bg-success text-light text-center">
            <tr>
                <th>Student Name</th>
                <th>Email Address</th>
                <th>Grade</th>
                <th>Class Name</th>
                <th>Instructor</th>
            </tr>
            </thead>
            <tbody id="manageStudent">

            </tbody>
        </table>
    </div>

    <div class="mt-3 mb-3">
        <h4 class="main5">Total Students</h4>
    </div>

    <div class="mt-3 mb-3">
        <h4 class="main6">Page</h4>
    </div>

</section>
<script src="assets/boostrap/js/bootstrap.bundle.min.js"></script>
<script>
    var baseURL = "http://localhost:8080/app/manage";

    function loadAllStudents() {
        $("#manageStudent").empty();
        $.ajax({
            url: baseURL,
            method: "GET",
            success: function (resp) {
                for (const student of resp.data) {
                    let row = `<tr><td>${student.name}</td><td>${student.email}</td><td>${student.grade}</td><td>${student.className}</td><td>${student.instructor}</td></tr>`;
                    $("#manageStudent").append(row);
                }
            },
            error: function (ob) {
                alert(ob.responseJSON.message);
            }
        });
    }

    loadAllStudents();

</script>
</body>
</html>